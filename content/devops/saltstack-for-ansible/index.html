<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=JamFox><link href=https://docs.jamfox.dev/content/devops/saltstack-for-ansible/ rel=canonical><link href=../performance-testing-benchmarking/ rel=prev><link href=../ansiblevault/ rel=next><link rel=icon href=../../../assets/icon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.12"><title>Ansible User's Guide to Saltstack - JamFox's Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.7e359304.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Noto Sans";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script defer src=https://cloud.umami.is/script.js data-website-id=bead9d93-4ef7-4e94-b53b-c936abe55767></script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=light-blue data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#what-ansible-and-saltstack-have-in-common class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="JamFox's Documentation" class="md-header__button md-logo" aria-label="JamFox's Documentation" data-md-component=logo> <img src=../../../assets/icon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> JamFox's Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Ansible User's Guide to Saltstack </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=light-blue data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/JamFox/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> github.com/JamFox </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../homelab/ class=md-tabs__link> HomeLab </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> DevOps </a> </li> <li class=md-tabs__item> <a href=../../food/ class=md-tabs__link> Food & Drinks </a> </li> <li class=md-tabs__item> <a href=../../links/ class=md-tabs__link> Links </a> </li> <li class=md-tabs__item> <a href=../../extras/ class=md-tabs__link> Other </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="JamFox's Documentation" class="md-nav__button md-logo" aria-label="JamFox's Documentation" data-md-component=logo> <img src=../../../assets/icon.png alt=logo> </a> JamFox's Documentation </label> <div class=md-nav__source> <a href=https://github.com/JamFox/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> github.com/JamFox </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../homelab/ class=md-nav__link> <span class=md-ellipsis> HomeLab </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> DevOps </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> DevOps </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex> <span class=md-ellipsis> Version Control </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Version Control </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../semver/ class=md-nav__link> <span class=md-ellipsis> Semantic Versioning </span> </a> </li> <li class=md-nav__item> <a href=../gitbasics/ class=md-nav__link> <span class=md-ellipsis> Git For Beginners </span> </a> </li> <li class=md-nav__item> <a href=../gitdos/ class=md-nav__link> <span class=md-ellipsis> Git DOs & DON'Ts </span> </a> </li> <li class=md-nav__item> <a href=../precommit/ class=md-nav__link> <span class=md-ellipsis> Precommit </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex> <span class=md-ellipsis> Performance Testing & Benchmarking </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Performance Testing & Benchmarking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../performance-testing-benchmarking/ class=md-nav__link> <span class=md-ellipsis> Performance Testing & Benchmarking </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4 checked> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex> <span class=md-ellipsis> Configuration Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=true> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Configuration Management </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Ansible User's Guide to Saltstack </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Ansible User's Guide to Saltstack </span> </a> <nav class="md-nav md-nav--secondary" aria-label="On this page"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> On this page </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#what-ansible-and-saltstack-have-in-common class=md-nav__link> <span class=md-ellipsis> What Ansible and Saltstack have in common </span> </a> </li> <li class=md-nav__item> <a href=#how-ansible-and-saltstack-differ class=md-nav__link> <span class=md-ellipsis> How Ansible and Saltstack differ </span> </a> <nav class=md-nav aria-label="How Ansible and Saltstack differ"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#initial-setup class=md-nav__link> <span class=md-ellipsis> Initial setup </span> </a> </li> <li class=md-nav__item> <a href=#executing-commands class=md-nav__link> <span class=md-ellipsis> Executing commands </span> </a> </li> <li class=md-nav__item> <a href=#defining-tasks-for-multiple-sets-of-hosts class=md-nav__link> <span class=md-ellipsis> Defining tasks for multiple sets of hosts </span> </a> </li> <li class=md-nav__item> <a href=#writing-tasks class=md-nav__link> <span class=md-ellipsis> Writing tasks </span> </a> </li> <li class=md-nav__item> <a href=#managing-variables class=md-nav__link> <span class=md-ellipsis> Managing variables </span> </a> </li> <li class=md-nav__item> <a href=#event-based-tasks class=md-nav__link> <span class=md-ellipsis> Event based tasks </span> </a> </li> <li class=md-nav__item> <a href=#reusability-of-tasks class=md-nav__link> <span class=md-ellipsis> Reusability of tasks </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> <nav class=md-nav aria-label=Conclusion> <ul class=md-nav__list> <li class=md-nav__item> <a href=#points-against-ansible-and-for-salt class=md-nav__link> <span class=md-ellipsis> Points against Ansible and for Salt </span> </a> </li> <li class=md-nav__item> <a href=#points-for-ansible-and-against-salt class=md-nav__link> <span class=md-ellipsis> Points for Ansible and against Salt </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#further-resources-for-saltstack class=md-nav__link> <span class=md-ellipsis> Further resources for Saltstack </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../ansiblevault/ class=md-nav__link> <span class=md-ellipsis> Ansible Vault </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex> <span class=md-ellipsis> Provisioning </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Provisioning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../packer/ class=md-nav__link> <span class=md-ellipsis> Hashicorp Packer </span> </a> </li> <li class=md-nav__item> <a href=../terraform/ class=md-nav__link> <span class=md-ellipsis> Hashicorp Terraform </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex> <span class=md-ellipsis> GitLab </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> GitLab </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../packerci/ class=md-nav__link> <span class=md-ellipsis> OpenStack Packer GitLab CI/CD </span> </a> </li> <li class=md-nav__item> <a href=../gitlabrunnershare/ class=md-nav__link> <span class=md-ellipsis> Sharing Runners To Multiple Projects </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex> <span class=md-ellipsis> Orchestration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Orchestration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../orchestrationexplained/ class=md-nav__link> <span class=md-ellipsis> Orchestration Fundamentals Explained Simply </span> </a> </li> <li class=md-nav__item> <a href=../consul/ class=md-nav__link> <span class=md-ellipsis> Hashicorp Consul </span> </a> </li> <li class=md-nav__item> <a href=../nomad/ class=md-nav__link> <span class=md-ellipsis> Hashicorp Nomad </span> </a> </li> <li class=md-nav__item> <a href=../kubernetes/ class=md-nav__link> <span class=md-ellipsis> Kubernetes </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8 id=__nav_3_8_label tabindex> <span class=md-ellipsis> Secrets Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Secrets Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../vaultad/ class=md-nav__link> <span class=md-ellipsis> Vault with AD </span> </a> </li> <li class=md-nav__item> <a href=../vaultkrb/ class=md-nav__link> <span class=md-ellipsis> Vault with Kerberos </span> </a> </li> <li class=md-nav__item> <a href=../sops/ class=md-nav__link> <span class=md-ellipsis> Mozilla SOPS </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_10> <label class=md-nav__link for=__nav_3_10 id=__nav_3_10_label tabindex> <span class=md-ellipsis> Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_10_label aria-expanded=false> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ceph/ class=md-nav__link> <span class=md-ellipsis> Ceph </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_11> <label class=md-nav__link for=__nav_3_11 id=__nav_3_11_label tabindex> <span class=md-ellipsis> AI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_11_label aria-expanded=false> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ai-build/ class=md-nav__link> <span class=md-ellipsis> Building AI </span> </a> </li> <li class=md-nav__item> <a href=../prompteng/ class=md-nav__link> <span class=md-ellipsis> Prompt Engineering </span> </a> </li> <li class=md-nav__item> <a href=../stablediffusion/ class=md-nav__link> <span class=md-ellipsis> Stable Diffusion </span> </a> </li> <li class=md-nav__item> <a href=../stablediffusion-ps1/ class=md-nav__link> <span class=md-ellipsis> Playstation Filter Using Stable Diffusion </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12> <label class=md-nav__link for=__nav_3_12 id=__nav_3_12_label tabindex> <span class=md-ellipsis> Red Teaming & Penetration Testing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_12_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> Red Teaming & Penetration Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../redteaming/ class=md-nav__link> <span class=md-ellipsis> Red Teaming </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../food/ class=md-nav__link> <span class=md-ellipsis> Food & Drinks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../links/ class=md-nav__link> <span class=md-ellipsis> Links </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../extras/ class=md-nav__link> <span class=md-ellipsis> Other </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="On this page"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> On this page </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#what-ansible-and-saltstack-have-in-common class=md-nav__link> <span class=md-ellipsis> What Ansible and Saltstack have in common </span> </a> </li> <li class=md-nav__item> <a href=#how-ansible-and-saltstack-differ class=md-nav__link> <span class=md-ellipsis> How Ansible and Saltstack differ </span> </a> <nav class=md-nav aria-label="How Ansible and Saltstack differ"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#initial-setup class=md-nav__link> <span class=md-ellipsis> Initial setup </span> </a> </li> <li class=md-nav__item> <a href=#executing-commands class=md-nav__link> <span class=md-ellipsis> Executing commands </span> </a> </li> <li class=md-nav__item> <a href=#defining-tasks-for-multiple-sets-of-hosts class=md-nav__link> <span class=md-ellipsis> Defining tasks for multiple sets of hosts </span> </a> </li> <li class=md-nav__item> <a href=#writing-tasks class=md-nav__link> <span class=md-ellipsis> Writing tasks </span> </a> </li> <li class=md-nav__item> <a href=#managing-variables class=md-nav__link> <span class=md-ellipsis> Managing variables </span> </a> </li> <li class=md-nav__item> <a href=#event-based-tasks class=md-nav__link> <span class=md-ellipsis> Event based tasks </span> </a> </li> <li class=md-nav__item> <a href=#reusability-of-tasks class=md-nav__link> <span class=md-ellipsis> Reusability of tasks </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> <nav class=md-nav aria-label=Conclusion> <ul class=md-nav__list> <li class=md-nav__item> <a href=#points-against-ansible-and-for-salt class=md-nav__link> <span class=md-ellipsis> Points against Ansible and for Salt </span> </a> </li> <li class=md-nav__item> <a href=#points-for-ansible-and-against-salt class=md-nav__link> <span class=md-ellipsis> Points for Ansible and against Salt </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#further-resources-for-saltstack class=md-nav__link> <span class=md-ellipsis> Further resources for Saltstack </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/JamFox/docs.jamfox.dev/raw/master/docs/content/devops/saltstack-for-ansible.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <h1>Ansible User's Guide to Saltstack</h1> <h2 id=what-ansible-and-saltstack-have-in-common>What Ansible and Saltstack have in common<a class=headerlink href=#what-ansible-and-saltstack-have-in-common title="Anchor link to this section for reference">ඞ</a></h2> <p>Both tools support similar core features and serve the same use cases:</p> <ul> <li>Are hybrid (imperative/declarative) configuration management for mutable infrastructure</li> <li>Use YAML and Jinja2 with similar syntax</li> </ul> <h2 id=how-ansible-and-saltstack-differ>How Ansible and Saltstack differ<a class=headerlink href=#how-ansible-and-saltstack-differ title="Anchor link to this section for reference">ඞ</a></h2> <p>Most differences stem from their differing architectures: while Ansible is agentless, Saltstack follows the master-minion by default (but also supports master only, minion only as well). </p> <h3 id=initial-setup>Initial setup<a class=headerlink href=#initial-setup title="Anchor link to this section for reference">ඞ</a></h3> <p>For Ansible nothing needs to be done on the bastion where playbooks will be run to configure hosts. Once playbooks have been written all that needs to be done is to run the playbooks.</p> <p>For Saltstack the <a href=https://docs.saltproject.io/en/latest/ref/configuration/master.html>master needs to be installed and configured</a> (default config may suffice). After that the <a href=https://docs.saltproject.io/en/latest/ref/configuration/minion.html>minion needs to be installed</a>. When a Salt minion starts, by default it searches for a master that resolves to the <code>salt</code> hostname on the network. If found, the minion initiates the handshake and key authentication process with the Salt master. Master can be configured to accept keys automatically or manually.</p> <h3 id=executing-commands>Executing commands<a class=headerlink href=#executing-commands title="Anchor link to this section for reference">ඞ</a></h3> <p>With Ansible a simple example command to check OS version of hosts looks like this:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Bash</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a>ansible<span class=w> </span>servers<span class=w> </span>-m<span class=w> </span>setup<span class=w> </span>-i<span class=w> </span>ansible_hosts<span class=w> </span>-a<span class=w> </span><span class=s1>&#39;filter=ansible_memfree_mb,ansible_memtotal_mb&#39;</span>
</code></pre></div></td></tr></table></div> <p>For Saltstack the same would be:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Bash</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span>
<span class=normal><a href=#__codelineno-1-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=c1># &#39;*&#39; means that all minions will be targeted with the command</span>
<a id=__codelineno-1-2 name=__codelineno-1-2></a>salt<span class=w> </span><span class=s1>&#39;*&#39;</span><span class=w> </span>status.meminfo
</code></pre></div></td></tr></table></div> <h3 id=defining-tasks-for-multiple-sets-of-hosts>Defining tasks for multiple sets of hosts<a class=headerlink href=#defining-tasks-for-multiple-sets-of-hosts title="Anchor link to this section for reference">ඞ</a></h3> <p>Ansible has the concept of playbooks where tasks are defined. The equivalent for Saltstack are state formulas. </p> <p>In Ansible, a play is a set (one or more) of tasks to execute on a hostgroup. A run is a set of plays that are run. <a href=https://docs.ansible.com/ansible/2.8/user_guide/playbooks_best_practices.html#content-organization>Ansible has some best practices</a> on how to organize Ansible plays and playbooks, however there does not exist a set structure. For comparisons sake I assume the following (very common) structure: there is one run which runs multiple plays on multiple hostgroups, each play defines a number of playbooks to run from roles.</p> <p>For Saltstack there is the <a href=https://docs.saltproject.io/en/latest/ref/states/top.html#states-top>top file</a> which is similar to an Ansible play as it describes a list hostgroups and a list of formulas to run on the hostgroups.</p> <p>A top file example: </p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span>
<span class=normal><a href=#__codelineno-2-2>2</a></span>
<span class=normal><a href=#__codelineno-2-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=nt>base</span><span class=p>:</span><span class=w>          </span><span class=c1># Apply SLS files from the directory root for the &#39;base&#39; environment</span>
<a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=w>  </span><span class=s>&#39;web*&#39;</span><span class="p p-Indicator">:</span><span class=w>      </span><span class=c1># All minions with a minion_id that begins with &#39;web&#39;</span>
<a id=__codelineno-2-3 name=__codelineno-2-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apache</span><span class=w>   </span><span class=c1># Apply the state file named &#39;apache.sls&#39;</span>
</code></pre></div></td></tr></table></div> <p>The equivalent play for Ansible would be: <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1>1</a></span>
<span class=normal><a href=#__codelineno-3-2>2</a></span>
<span class=normal><a href=#__codelineno-3-3>3</a></span>
<span class=normal><a href=#__codelineno-3-4>4</a></span>
<span class=normal><a href=#__codelineno-3-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PLAYBOOK FOR GROUP &#39;WEB&#39;</span>
<a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">web</span><span class=w>       </span><span class=c1># All hosts in &#39;web&#39; hostgroup</span>
<a id=__codelineno-3-3 name=__codelineno-3-3></a>
<a id=__codelineno-3-4 name=__codelineno-3-4></a><span class=w>  </span><span class=nt>roles</span><span class=p>:</span><span class=w>          </span>
<a id=__codelineno-3-5 name=__codelineno-3-5></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>role</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apache</span><span class=w>  </span><span class=c1># Apply the playbook from &#39;apache&#39; role </span>
</code></pre></div></td></tr></table></div></p> <h3 id=writing-tasks>Writing tasks<a class=headerlink href=#writing-tasks title="Anchor link to this section for reference">ඞ</a></h3> <p>The tasks in the aforementioned apache role in Ansible would have the following structure:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1> 1</a></span>
<span class=normal><a href=#__codelineno-4-2> 2</a></span>
<span class=normal><a href=#__codelineno-4-3> 3</a></span>
<span class=normal><a href=#__codelineno-4-4> 4</a></span>
<span class=normal><a href=#__codelineno-4-5> 5</a></span>
<span class=normal><a href=#__codelineno-4-6> 6</a></span>
<span class=normal><a href=#__codelineno-4-7> 7</a></span>
<span class=normal><a href=#__codelineno-4-8> 8</a></span>
<span class=normal><a href=#__codelineno-4-9> 9</a></span>
<span class=normal><a href=#__codelineno-4-10>10</a></span>
<span class=normal><a href=#__codelineno-4-11>11</a></span>
<span class=normal><a href=#__codelineno-4-12>12</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1></a>roles/
<a id=__codelineno-4-2 name=__codelineno-4-2></a>    apache/               # this hierarchy represents a &quot;role&quot;
<a id=__codelineno-4-3 name=__codelineno-4-3></a>        tasks/            #
<a id=__codelineno-4-4 name=__codelineno-4-4></a>            main.yml      #  &lt;-- tasks file can include smaller files if warranted
<a id=__codelineno-4-5 name=__codelineno-4-5></a>        templates/        #  &lt;-- files for use with the template resource
<a id=__codelineno-4-6 name=__codelineno-4-6></a>            httpd.conf.j2   #  &lt;------- templates end in .j2
<a id=__codelineno-4-7 name=__codelineno-4-7></a>        files/            #
<a id=__codelineno-4-8 name=__codelineno-4-8></a>            bar.txt       #  &lt;-- files for use with the copy resource
<a id=__codelineno-4-9 name=__codelineno-4-9></a>        vars/             #
<a id=__codelineno-4-10 name=__codelineno-4-10></a>            main.yml      #  &lt;-- variables associated with this role
<a id=__codelineno-4-11 name=__codelineno-4-11></a>        defaults/         #
<a id=__codelineno-4-12 name=__codelineno-4-12></a>            main.yml      #  &lt;-- default lower priority variables for this role
</code></pre></div></td></tr></table></div> <p>The <code>roles/apache/tasks/main.yml</code> aka the role playbook would look something like this:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1> 1</a></span>
<span class=normal><a href=#__codelineno-5-2> 2</a></span>
<span class=normal><a href=#__codelineno-5-3> 3</a></span>
<span class=normal><a href=#__codelineno-5-4> 4</a></span>
<span class=normal><a href=#__codelineno-5-5> 5</a></span>
<span class=normal><a href=#__codelineno-5-6> 6</a></span>
<span class=normal><a href=#__codelineno-5-7> 7</a></span>
<span class=normal><a href=#__codelineno-5-8> 8</a></span>
<span class=normal><a href=#__codelineno-5-9> 9</a></span>
<span class=normal><a href=#__codelineno-5-10>10</a></span>
<span class=normal><a href=#__codelineno-5-11>11</a></span>
<span class=normal><a href=#__codelineno-5-12>12</a></span>
<span class=normal><a href=#__codelineno-5-13>13</a></span>
<span class=normal><a href=#__codelineno-5-14>14</a></span>
<span class=normal><a href=#__codelineno-5-15>15</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Install apache</span>
<a id=__codelineno-5-2 name=__codelineno-5-2></a><span class=w>  </span><span class=nt>ansible.builtin.package</span><span class=p>:</span>
<a id=__codelineno-5-3 name=__codelineno-5-3></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span>
<a id=__codelineno-5-4 name=__codelineno-5-4></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">httpd</span>
<a id=__codelineno-5-5 name=__codelineno-5-5></a><span class=w>    </span><span class=nt>state</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">installed</span>
<a id=__codelineno-5-6 name=__codelineno-5-6></a>
<a id=__codelineno-5-7 name=__codelineno-5-7></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Template apache config</span>
<a id=__codelineno-5-8 name=__codelineno-5-8></a><span class=w>  </span><span class=nt>ansible.builtin.template</span><span class=p>:</span>
<a id=__codelineno-5-9 name=__codelineno-5-9></a><span class=w>    </span><span class=nt>src</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">httpd.conf.j2</span>
<a id=__codelineno-5-10 name=__codelineno-5-10></a><span class=w>    </span><span class=nt>dest</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/httpd/conf/httpd.conf</span>
<a id=__codelineno-5-11 name=__codelineno-5-11></a>
<a id=__codelineno-5-12 name=__codelineno-5-12></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Copy apache config</span>
<a id=__codelineno-5-13 name=__codelineno-5-13></a><span class=w>  </span><span class=nt>ansible.builtin.copy</span><span class=p>:</span>
<a id=__codelineno-5-14 name=__codelineno-5-14></a><span class=w>    </span><span class=nt>src</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bar.txt</span>
<a id=__codelineno-5-15 name=__codelineno-5-15></a><span class=w>    </span><span class=nt>dest</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/etc/httpd/conf/</span>
</code></pre></div></td></tr></table></div> <p>For Saltstack the state formula for apache would have the following structure:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1>1</a></span>
<span class=normal><a href=#__codelineno-6-2>2</a></span>
<span class=normal><a href=#__codelineno-6-3>3</a></span>
<span class=normal><a href=#__codelineno-6-4>4</a></span>
<span class=normal><a href=#__codelineno-6-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a>formulas/
<a id=__codelineno-6-2 name=__codelineno-6-2></a>    apache/
<a id=__codelineno-6-3 name=__codelineno-6-3></a>        init.sls
<a id=__codelineno-6-4 name=__codelineno-6-4></a>        httpd.conf.j2
<a id=__codelineno-6-5 name=__codelineno-6-5></a>        bar.txt
</code></pre></div></td></tr></table></div> <p>The <code>init.sls</code> aka the state formula would look something like this:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1> 1</a></span>
<span class=normal><a href=#__codelineno-7-2> 2</a></span>
<span class=normal><a href=#__codelineno-7-3> 3</a></span>
<span class=normal><a href=#__codelineno-7-4> 4</a></span>
<span class=normal><a href=#__codelineno-7-5> 5</a></span>
<span class=normal><a href=#__codelineno-7-6> 6</a></span>
<span class=normal><a href=#__codelineno-7-7> 7</a></span>
<span class=normal><a href=#__codelineno-7-8> 8</a></span>
<span class=normal><a href=#__codelineno-7-9> 9</a></span>
<span class=normal><a href=#__codelineno-7-10>10</a></span>
<span class=normal><a href=#__codelineno-7-11>11</a></span>
<span class=normal><a href=#__codelineno-7-12>12</a></span>
<span class=normal><a href=#__codelineno-7-13>13</a></span>
<span class=normal><a href=#__codelineno-7-14>14</a></span>
<span class=normal><a href=#__codelineno-7-15>15</a></span>
<span class=normal><a href=#__codelineno-7-16>16</a></span>
<span class=normal><a href=#__codelineno-7-17>17</a></span>
<span class=normal><a href=#__codelineno-7-18>18</a></span>
<span class=normal><a href=#__codelineno-7-19>19</a></span>
<span class=normal><a href=#__codelineno-7-20>20</a></span>
<span class=normal><a href=#__codelineno-7-21>21</a></span>
<span class=normal><a href=#__codelineno-7-22>22</a></span>
<span class=normal><a href=#__codelineno-7-23>23</a></span>
<span class=normal><a href=#__codelineno-7-24>24</a></span>
<span class=normal><a href=#__codelineno-7-25>25</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=nt>install apache</span><span class=p>:</span>
<a id=__codelineno-7-2 name=__codelineno-7-2></a><span class=w>  </span><span class=nt>pkg.installed</span><span class=p>:</span>
<a id=__codelineno-7-3 name=__codelineno-7-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">httpd</span>
<a id=__codelineno-7-4 name=__codelineno-7-4></a>
<a id=__codelineno-7-5 name=__codelineno-7-5></a><span class=nt>run apache service</span><span class=p>:</span>
<a id=__codelineno-7-6 name=__codelineno-7-6></a><span class=w>  </span><span class=nt>service.running</span><span class=p>:</span>
<a id=__codelineno-7-7 name=__codelineno-7-7></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">httpd</span>
<a id=__codelineno-7-8 name=__codelineno-7-8></a>
<a id=__codelineno-7-9 name=__codelineno-7-9></a><span class=nt>/etc/httpd/conf/httpd.conf</span><span class=p>:</span>
<a id=__codelineno-7-10 name=__codelineno-7-10></a><span class=w>  </span><span class=nt>file.managed</span><span class=p>:</span>
<a id=__codelineno-7-11 name=__codelineno-7-11></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>source</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">salt://apache/http.conf.j2</span>
<a id=__codelineno-7-12 name=__codelineno-7-12></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<a id=__codelineno-7-13 name=__codelineno-7-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<a id=__codelineno-7-14 name=__codelineno-7-14></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">644</span>
<a id=__codelineno-7-15 name=__codelineno-7-15></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>template</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">jinja</span>
<a id=__codelineno-7-16 name=__codelineno-7-16></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>defaults</span><span class=p>:</span>
<a id=__codelineno-7-17 name=__codelineno-7-17></a><span class=w>        </span><span class=nt>custom_var</span><span class=p>:</span><span class=w> </span><span class=s>&quot;default</span><span class=nv> </span><span class=s>value&quot;</span>
<a id=__codelineno-7-18 name=__codelineno-7-18></a><span class=w>        </span><span class=nt>other_var</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">123</span>
<a id=__codelineno-7-19 name=__codelineno-7-19></a>
<a id=__codelineno-7-20 name=__codelineno-7-20></a><span class=nt>/etc/httpd/conf/bar.txt</span><span class=p>:</span>
<a id=__codelineno-7-21 name=__codelineno-7-21></a><span class=w>  </span><span class=nt>file.managed</span><span class=p>:</span>
<a id=__codelineno-7-22 name=__codelineno-7-22></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>source</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">salt://apache/http.conf</span>
<a id=__codelineno-7-23 name=__codelineno-7-23></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<a id=__codelineno-7-24 name=__codelineno-7-24></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<a id=__codelineno-7-25 name=__codelineno-7-25></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">644</span>
</code></pre></div></td></tr></table></div> <p>Worth noting that Salt also allows (and even encourages) to use templating in formulas while Ansible does not allow templating in playbooks. For example we could add some variables to the apache config task from before depending on the OS of the minion:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1> 1</a></span>
<span class=normal><a href=#__codelineno-8-2> 2</a></span>
<span class=normal><a href=#__codelineno-8-3> 3</a></span>
<span class=normal><a href=#__codelineno-8-4> 4</a></span>
<span class=normal><a href=#__codelineno-8-5> 5</a></span>
<span class=normal><a href=#__codelineno-8-6> 6</a></span>
<span class=normal><a href=#__codelineno-8-7> 7</a></span>
<span class=normal><a href=#__codelineno-8-8> 8</a></span>
<span class=normal><a href=#__codelineno-8-9> 9</a></span>
<span class=normal><a href=#__codelineno-8-10>10</a></span>
<span class=normal><a href=#__codelineno-8-11>11</a></span>
<span class=normal><a href=#__codelineno-8-12>12</a></span>
<span class=normal><a href=#__codelineno-8-13>13</a></span>
<span class=normal><a href=#__codelineno-8-14>14</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=nt>/etc/httpd/conf/httpd.conf</span><span class=p>:</span>
<a id=__codelineno-8-2 name=__codelineno-8-2></a><span class=w>  </span><span class=nt>file.managed</span><span class=p>:</span>
<a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>source</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">salt://apache/http.conf.j2</span>
<a id=__codelineno-8-4 name=__codelineno-8-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<a id=__codelineno-8-5 name=__codelineno-8-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<a id=__codelineno-8-6 name=__codelineno-8-6></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">644</span>
<a id=__codelineno-8-7 name=__codelineno-8-7></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>template</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">jinja</span>
<a id=__codelineno-8-8 name=__codelineno-8-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>defaults</span><span class=p>:</span>
<a id=__codelineno-8-9 name=__codelineno-8-9></a><span class=w>        </span><span class=nt>custom_var</span><span class=p>:</span><span class=w> </span><span class=s>&quot;default</span><span class=nv> </span><span class=s>value&quot;</span>
<a id=__codelineno-8-10 name=__codelineno-8-10></a><span class=w>        </span><span class=nt>other_var</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">123</span>
<a id=__codelineno-8-11 name=__codelineno-8-11></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>if grains</span><span class="p p-Indicator">[</span><span class=s>&#39;os&#39;</span><span class="p p-Indicator">]</span><span class=w> </span><span class=nv>== &#39;Ubuntu&#39; %</span><span class="p p-Indicator">}</span>
<a id=__codelineno-8-12 name=__codelineno-8-12></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>context</span><span class=p>:</span>
<a id=__codelineno-8-13 name=__codelineno-8-13></a><span class=w>        </span><span class=nt>custom_var</span><span class=p>:</span><span class=w> </span><span class=s>&quot;override&quot;</span>
<a id=__codelineno-8-14 name=__codelineno-8-14></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>endif %</span><span class="p p-Indicator">}</span>
</code></pre></div></td></tr></table></div> <h3 id=managing-variables>Managing variables<a class=headerlink href=#managing-variables title="Anchor link to this section for reference">ඞ</a></h3> <p>Ansible has many (22 in fact) <a href=https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_variables.html#variable-precedence-where-should-i-put-a-variable>different places for variables</a> with a hierarchy of variable precedence. In essence variables can be defined almost anywhere.</p> <p>Saltstack has grains, variables that come <em>from</em> minions, and pillars, variables that go <em>to</em> minions as well as variables defined in formulas. In that sense, managing variables becomes a lot more explicit and readable when compared to Ansible.</p> <p>Merging lists in Ansible: <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1>1</a></span>
<span class=normal><a href=#__codelineno-9-2>2</a></span>
<span class=normal><a href=#__codelineno-9-3>3</a></span>
<span class=normal><a href=#__codelineno-9-4>4</a></span>
<span class=normal><a href=#__codelineno-9-5>5</a></span>
<span class=normal><a href=#__codelineno-9-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Install apache</span>
<a id=__codelineno-9-2 name=__codelineno-9-2></a><span class=w>  </span><span class=nt>ansible.builtin.package</span><span class=p>:</span>
<a id=__codelineno-9-3 name=__codelineno-9-3></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span>
<a id=__codelineno-9-4 name=__codelineno-9-4></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;{{</span><span class=nv> </span><span class=s>item</span><span class=nv> </span><span class=s>}}&quot;</span>
<a id=__codelineno-9-5 name=__codelineno-9-5></a><span class=w>    </span><span class=nt>state</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">installed</span>
<a id=__codelineno-9-6 name=__codelineno-9-6></a><span class=w>  </span><span class=nt>with_items</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{{</span><span class=nv> </span><span class=s>pkgs</span><span class=nv> </span><span class=s>|</span><span class=nv> </span><span class=s>combine(group_pkgs,</span><span class=nv> </span><span class=s>list_merge=&#39;append_rp&#39;)</span><span class=nv> </span><span class=s>}}&quot;</span>
</code></pre></div></td></tr></table></div></p> <p>Merging lists in Saltstack:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span>
<span class=normal><a href=#__codelineno-10-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=nt>install packages</span><span class=p>:</span>
<a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=w>  </span><span class=nt>pkg.installed</span><span class=p>:</span>
<a id=__codelineno-10-3 name=__codelineno-10-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>pillar</span><span class="p p-Indicator">[</span><span class=s>&#39;pkgs&#39;</span><span class="p p-Indicator">][</span><span class=s>&#39;group_pkgs&#39;</span><span class="p p-Indicator">]</span><span class=w> </span><span class="p p-Indicator">}}</span>
</code></pre></div></td></tr></table></div> <h3 id=event-based-tasks>Event based tasks<a class=headerlink href=#event-based-tasks title="Anchor link to this section for reference">ඞ</a></h3> <p>Ansible does not have event based tasks, however a developer preview exists for <a href=https://www.ansible.com/use-cases/event-driven-automation>event driven Ansible features</a></p> <p>Saltstack has <a href=https://docs.saltproject.io/en/latest/topics/reactor/ >reactors</a>, which can be used to run formulas when defined events occur. This makes managing a dynamic set of hosts easy. For example master will run configuration formulas when a minion wakes up from powersave:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span>
<span class=normal><a href=#__codelineno-11-2>2</a></span>
<span class=normal><a href=#__codelineno-11-3>3</a></span>
<span class=normal><a href=#__codelineno-11-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=nt>reactor</span><span class=p>:</span><span class=w>                            </span><span class=c1># Master config section &quot;reactor&quot;</span>
<a id=__codelineno-11-2 name=__codelineno-11-2></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;salt/minion/*/start&#39;</span><span class="p p-Indicator">:</span><span class=w>          </span><span class=c1># Match tag &quot;salt/minion/*/start&quot;</span>
<a id=__codelineno-11-3 name=__codelineno-11-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/srv/reactor/start.sls</span><span class=w>        </span><span class=c1># Things to do when a minion starts</span>
<a id=__codelineno-11-4 name=__codelineno-11-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/srv/reactor/monitor.sls</span><span class=w>      </span><span class=c1># Other things to do</span>
</code></pre></div></td></tr></table></div> <h3 id=reusability-of-tasks>Reusability of tasks<a class=headerlink href=#reusability-of-tasks title="Anchor link to this section for reference">ඞ</a></h3> <p>In Ansible it is possible to separate roles into separate repositories and include them in playbooks by linking the repositories. It is also possible to separate multiple components (like multiple roles) into Ansible collections and then to include them in playbooks. With collections it is possible to specify which roles and components to include.</p> <p>With Saltstack it is possible to separate formulas and include them in the master configuration from the repository. It is possible to specify which formulas and paths to include and where to place them.</p> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Anchor link to this section for reference">ඞ</a></h2> <h3 id=points-against-ansible-and-for-salt>Points against Ansible and for Salt<a class=headerlink href=#points-against-ansible-and-for-salt title="Anchor link to this section for reference">ඞ</a></h3> <p>First, configuration management often turns into smart variable handling as your actual configurations get more generic over time. Thus handling variables becomes really important. Saltstack is more more explicit ways in which it handles variables: they're defined in a pillar. Contrast this with the variable precedence for Ansible (there's a hierarchy of 22 different variable locations). Usually with Ansible an admin will usually only have to think about 4 different variable locations (command line, hostgroup, host and role variables), but the requirement to always needing to consider and build playbooks around variable precedence makes for less readable and harder to maintain repos.</p> <p>Secondly, Saltstack uses master-agent architecture over Ansible's much much easier to get started with agentless approach. However, as a result, it tends not to scale as well as Saltstack because you have to open an SSH connection to every machine you want to manage. Saltstack, by contrast, uses ZeroMQ to communicate with minions: minions listen for instructions on one ZeroMQ port on the master (4505) and post back results on another (4506). It's blazing fast and it scales really well. Works even when SSH goes down or the machines don't expose ssh (e.g. locked down machines that do not need SSH). Worth noting that in terms of actually writing tasks for minions, they are very similar and both use YAML and Jinja, so in that sense they are both as easy to onboard new people for writing new tasks. The learning curve increase for Saltstack comes from the initial master-minion setup, but even that is not a hugely complicated job all things considered.</p> <p>Thirdly, master-agent architecture of Salt enables true event driven management with reactors which is especially good for dynamic host inventories (with hosts that often power on and off like gray nodes). So we could much easily define scenarios for minion wakeups.</p> <p>For notifications, Ansible has easier integration for sending emails however if we split the runs (by hostgroup) then that means an email for each hostgroup. Aggregating errors will become a problem that needs a custom script. For Salt aggregating results and more granular control over notifications needs more work, but is a lot more flexible and does not need custom scripts.</p> <h3 id=points-for-ansible-and-against-salt>Points for Ansible and against Salt<a class=headerlink href=#points-for-ansible-and-against-salt title="Anchor link to this section for reference">ඞ</a></h3> <p>The support for Ansible is a lot better, there are more people using it in both enterprise and open source. Community is also a lot bigger. Having such a big user base behind them gives Ansible much stable and reliable updates compared to Salt where looking at the best practices even from 3 years ago differ from the ones recommended today.</p> <p>Even if on paper SaltStack seems a lot better in many aspects on paper, in reality there are quite a few worrying problems. Like the git filesystem. It is possible to use <a href=https://docs.saltproject.io/en/latest/topics/tutorials/gitfs.html><code>gitfs</code></a> alongside the default <code>rootfs</code> to automatically fetch Salt formulas, pillars etc from remote git repos, however <code>gitfs</code> is unfortunately <a href="https://github.com/saltstack/salt/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+gitfs">buggy</a> and full of python version mismatch errors among other things (Check the warnings in the <a href=https://docs.saltproject.io/en/latest/topics/tutorials/gitfs.html><code>gitfs</code> documentation</a>). Basic things like version controlling config management should be reliable and it begs the question of what else might be buggy in Salt.</p> <p>Even variable handling gets messy when moving away from pillar only setups where you have to merge pillars with defaults and use map files in formulas which one might have to do <a href=https://saidvandeklundert.net/2019-11-18-saltstack-pillar-data-and-map-files/ >to keep SaltStack performant when managing a large number of minions</a>. Here's where the Ansible variable precedence actually comes in handy, because you can just define variables in the playbook and not have to worry about merging them.</p> <h2 id=further-resources-for-saltstack>Further resources for Saltstack<a class=headerlink href=#further-resources-for-saltstack title="Anchor link to this section for reference">ඞ</a></h2> <ul> <li><a href=https://docs.saltproject.io/en/master/topics/tutorials/walkthrough.html>Salt In 10 Minutes Walkthrough</a></li> <li><a href=https://docs.saltproject.io/salt/user-guide/en/latest/ >Salt User Guide</a></li> <li><a href=https://docs.saltproject.io/en/latest/contents.html>Salt Documentation</a></li> <li><a href=https://youtu.be/RbXnXZu_4ng>SaltStack Configuration Management Best Practices</a></li> </ul> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://jamfox.dev/ target=_blank rel=noopener title=jamfox.dev class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40h-16c-1.1 0-2.2 0-3.3-.1-1.4.1-2.8.1-4.2.1H392c-22.1 0-40-17.9-40-40v-88c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v88c0 22.1-17.9 40-40 40h-55.9c-1.5 0-3-.1-4.5-.2-1.2.1-2.4.2-3.6.2h-16c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9.1-2.8v-69.6H32c-18 0-32-14-32-32.1 0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7l255.4 224.5c8 7 12 15 11 24z"/></svg> </a> <a href=https://github.com/JamFox target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.linkedin.com/in/katurv/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://www.instagram.com/karlturvas/ target=_blank rel=noopener title=www.instagram.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> <a href=https://brain.jamfox.dev/ target=_blank rel=noopener title=brain.jamfox.dev class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M184 0c30.9 0 56 25.1 56 56v400c0 30.9-25.1 56-56 56-28.9 0-52.7-21.9-55.7-50.1-5.2 1.4-10.7 2.1-16.3 2.1-35.3 0-64-28.7-64-64 0-7.4 1.3-14.6 3.6-21.2C21.4 367.4 0 338.2 0 304c0-31.9 18.7-59.5 45.8-72.3C37.1 220.8 32 207 32 192c0-30.7 21.6-56.3 50.4-62.6C80.8 123.9 80 118 80 112c0-29.9 20.6-55.1 48.3-62.1 3-28 26.8-49.9 55.7-49.9zm144 0c28.9 0 52.6 21.9 55.7 49.9C411.5 56.9 432 82 432 112c0 6-.8 11.9-2.4 17.4 28.8 6.2 50.4 31.9 50.4 62.6 0 15-5.1 28.8-13.8 39.7 27.1 12.8 45.8 40.4 45.8 72.3 0 34.2-21.4 63.4-51.6 74.8 2.3 6.6 3.6 13.8 3.6 21.2 0 35.3-28.7 64-64 64-5.6 0-11.1-.7-16.3-2.1-3 28.2-26.8 50.1-55.7 50.1-30.9 0-56-25.1-56-56V56c0-30.9 25.1-56 56-56z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["header.autohide", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.tabs.sticky", "content.tabs.link", "search.share", "content.code.annotate", "content.code.copy", "content.action.view", "navigation.indexes", "navigation.prune"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.c8d2eff1.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../../../javascripts/tablesort.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>