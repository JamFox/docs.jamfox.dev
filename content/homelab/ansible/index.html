<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=JamFox><link href=https://docs.jamfox.dev/content/homelab/ansible/ rel=canonical><link href=../rpi/ rel=prev><link href=../dnsmasq/ rel=next><link rel=icon href=../../../assets/icon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.12"><title>Ansible - JamFox's Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.7e359304.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Noto Sans";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script defer src=https://cloud.umami.is/script.js data-website-id=bead9d93-4ef7-4e94-b53b-c936abe55767></script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=light-blue data-md-color-accent=light-blue> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#ansible-best-practices class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="JamFox's Documentation" class="md-header__button md-logo" aria-label="JamFox's Documentation" data-md-component=logo> <img src=../../../assets/icon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> JamFox's Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Ansible </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=light-blue data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/JamFox/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> github.com/JamFox </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> HomeLab </a> </li> <li class=md-tabs__item> <a href=../../devops/ class=md-tabs__link> DevOps </a> </li> <li class=md-tabs__item> <a href=../../food/ class=md-tabs__link> Food & Drinks </a> </li> <li class=md-tabs__item> <a href=../../links/ class=md-tabs__link> Links </a> </li> <li class=md-tabs__item> <a href=../../extras/ class=md-tabs__link> Other </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="JamFox's Documentation" class="md-nav__button md-logo" aria-label="JamFox's Documentation" data-md-component=logo> <img src=../../../assets/icon.png alt=logo> </a> JamFox's Documentation </label> <div class=md-nav__source> <a href=https://github.com/JamFox/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> github.com/JamFox </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> HomeLab </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> HomeLab </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../family/ class=md-nav__link> <span class=md-ellipsis> JamLab Family Guide </span> </a> </li> <li class=md-nav__item> <a href=../podman/ class=md-nav__link> <span class=md-ellipsis> Podman </span> </a> </li> <li class=md-nav__item> <a href=../networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../power/ class=md-nav__link> <span class=md-ellipsis> Power </span> </a> </li> <li class=md-nav__item> <a href=../rack/ class=md-nav__link> <span class=md-ellipsis> Rack </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex> <span class=md-ellipsis> Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ds220/ class=md-nav__link> <span class=md-ellipsis> Synology DS220+ </span> </a> </li> <li class=md-nav__item> <a href=../gmkteck10/ class=md-nav__link> <span class=md-ellipsis> GMKtec K10 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8 id=__nav_2_8_label tabindex> <span class=md-ellipsis> Operating systems </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> Operating systems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../proxmox/ class=md-nav__link> <span class=md-ellipsis> Proxmox VE </span> </a> </li> <li class=md-nav__item> <a href=../rpi/ class=md-nav__link> <span class=md-ellipsis> Raspberry Pi </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_9 checked> <label class=md-nav__link for=__nav_2_9 id=__nav_2_9_label tabindex> <span class=md-ellipsis> Configuration Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_9_label aria-expanded=true> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> Configuration Management </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Ansible </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Ansible </span> </a> <nav class="md-nav md-nav--secondary" aria-label="On this page"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> On this page </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#ansible-best-practices class=md-nav__link> <span class=md-ellipsis> Ansible Best Practices </span> </a> <nav class=md-nav aria-label="Ansible Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#idempotency class=md-nav__link> <span class=md-ellipsis> Idempotency </span> </a> </li> <li class=md-nav__item> <a href=#readability class=md-nav__link> <span class=md-ellipsis> Readability </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#jamlab-ansible-architecture class=md-nav__link> <span class=md-ellipsis> Jamlab Ansible Architecture </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_10> <label class=md-nav__link for=__nav_2_10 id=__nav_2_10_label tabindex> <span class=md-ellipsis> DNS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_10_label aria-expanded=false> <label class=md-nav__title for=__nav_2_10> <span class="md-nav__icon md-icon"></span> DNS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../dnsmasq/ class=md-nav__link> <span class=md-ellipsis> Dnsmasq </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_11> <label class=md-nav__link for=__nav_2_11 id=__nav_2_11_label tabindex> <span class=md-ellipsis> Games </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_11_label aria-expanded=false> <label class=md-nav__title for=__nav_2_11> <span class="md-nav__icon md-icon"></span> Games </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../minecraft/ class=md-nav__link> <span class=md-ellipsis> Minecraft Servers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_12> <label class=md-nav__link for=__nav_2_12 id=__nav_2_12_label tabindex> <span class=md-ellipsis> Archive </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_12_label aria-expanded=false> <label class=md-nav__title for=__nav_2_12> <span class="md-nav__icon md-icon"></span> Archive </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../jamlabnomad/ class=md-nav__link> <span class=md-ellipsis> JamLab Nomad </span> </a> </li> <li class=md-nav__item> <a href=../dl380g9/ class=md-nav__link> <span class=md-ellipsis> HP DL380 G9 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../devops/ class=md-nav__link> <span class=md-ellipsis> DevOps </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../food/ class=md-nav__link> <span class=md-ellipsis> Food & Drinks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../links/ class=md-nav__link> <span class=md-ellipsis> Links </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../extras/ class=md-nav__link> <span class=md-ellipsis> Other </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="On this page"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> On this page </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#ansible-best-practices class=md-nav__link> <span class=md-ellipsis> Ansible Best Practices </span> </a> <nav class=md-nav aria-label="Ansible Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#idempotency class=md-nav__link> <span class=md-ellipsis> Idempotency </span> </a> </li> <li class=md-nav__item> <a href=#readability class=md-nav__link> <span class=md-ellipsis> Readability </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#jamlab-ansible-architecture class=md-nav__link> <span class=md-ellipsis> Jamlab Ansible Architecture </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/JamFox/docs.jamfox.dev/raw/master/docs/content/homelab/ansible.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <h1>Ansible</h1> <div class="admonition info"> <p class=admonition-title>Info</p> <p><a href=https://www.ansible.com/ >Ansible Homepage</a> | <a href=https://docs.ansible.com/ >Ansible Documentation</a> | <a href=https://github.com/JamFox/jamlab-ansible>jamlab-ansible</a> | <a href=https://www.jeffgeerling.com/blog/2020/ansible-101-jeff-geerling-youtube-streaming-series>Jeff Geerling's Ansible Guide</a> | <a href=https://github.com/omerbsezer/Fast-Ansible>Fast Ansible Guide</a></p> </div> <p><a href=https://docs.ansible.com/ansible/latest/index.html>Ansible</a> is a software tool that provides simple but powerful automation for cross-platform computer support. It is primarily intended for IT professionals, who use it for application deployment, updates on workstations and servers, cloud provisioning, configuration management, intra-service orchestration, and nearly anything a systems administrator does on a weekly or daily basis. Ansible doesn't depend on agent software and has no additional security infrastructure, so it's easy to deploy.</p> <p>For the best guide for deep diving into using Ansible check out <a href=https://www.jeffgeerling.com/blog/2020/ansible-101-jeff-geerling-youtube-streaming-series>Jeff Geerling's Ansible Guide</a> if you like video format or <a href=https://github.com/omerbsezer/Fast-Ansible>Fast Ansible Guide</a> if you prefer text.</p> <p>For configuration management it made sense to go with something simple to ease bootstrapping and favoring mutability for fastest development. Running a whole platform like Puppet did not make sense because of bootstrapping and resource overhead. Ansible is simple to write, understand and manage if written well from the get-go. I also tried SaltStack, but in the end it had too many shortcomings, check out the conclusions of the <a href=../../devops/saltstack-for-ansible/ >Ansible User's Guide to Saltstack</a> page.</p> <p>Also knowing Ansible I knew how slow it can be. There's two ways of solving this: using push mode with a central management (with homebrew solutions or AWX/Ansible Tower) with parallel playbook execution for each host OR pull mode where each host essentially configures itself. Running AWX/Ansible Tower has the same problem of bootstrapping and resource overhead. Homebrew parallel push system spikes the central management resource usage when executed and requires you to be on two hosts (central management host and the host being configured) when developing. It is quite evident that pull mode is the more scalable, resource efficient and easier for swift changes, although because of it's outside-in nature it is less secure. I've tried and used both, but went back to push mode using <a href=https://github.com/JamFox/ansible-parallel>ansible-parallel</a>.</p> <p>I settled on the following requirements:</p> <ul> <li>Easy to bootstrap (i.e. couple of commands excluding secrets)</li> <li>Scalable (execution time does not depend on the number of hosts)</li> <li>Simple to modify and manage (DRY monorepo for all hosts)</li> <li>No single point of failure in the form of a centralized configuration bastion</li> </ul> <p>The solution was <a href=https://github.com/JamFox/jamlab-ansible>jamlab-ansible</a>: Homelab push-mode configuration management with Ansible.</p> <h2 id=ansible-best-practices>Ansible Best Practices<a class=headerlink href=#ansible-best-practices title="Anchor link to this section for reference">ඞ</a></h2> <h3 id=idempotency>Idempotency<a class=headerlink href=#idempotency title="Anchor link to this section for reference">ඞ</a></h3> <p>The most important thing about using Ansible is that all tasks should be idempotent. It means that each time any task is run, the result of it should be the same regardless of any state on the machine it is run on. For example if you want to install some package on a host with ansible and use the ansible.builtin.shell module for it with some command. Maybe it will succeed the first time but give an error when the package is already installed.</p> <p>Instead of ansible.builtin.shell module we should use purpose built Ansible modules if they exist since they will make sure that the result is idempotent. However you can make shell tasks idempotent as well with some workarounds. For example consider the following very common trick of registering outputs from tasks:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1> 1</a></span>
<span class=normal><a href=#__codelineno-0-2> 2</a></span>
<span class=normal><a href=#__codelineno-0-3> 3</a></span>
<span class=normal><a href=#__codelineno-0-4> 4</a></span>
<span class=normal><a href=#__codelineno-0-5> 5</a></span>
<span class=normal><a href=#__codelineno-0-6> 6</a></span>
<span class=normal><a href=#__codelineno-0-7> 7</a></span>
<span class=normal><a href=#__codelineno-0-8> 8</a></span>
<span class=normal><a href=#__codelineno-0-9> 9</a></span>
<span class=normal><a href=#__codelineno-0-10>10</a></span>
<span class=normal><a href=#__codelineno-0-11>11</a></span>
<span class=normal><a href=#__codelineno-0-12>12</a></span>
<span class=normal><a href=#__codelineno-0-13>13</a></span>
<span class=normal><a href=#__codelineno-0-14>14</a></span>
<span class=normal><a href=#__codelineno-0-15>15</a></span>
<span class=normal><a href=#__codelineno-0-16>16</a></span>
<span class=normal><a href=#__codelineno-0-17>17</a></span>
<span class=normal><a href=#__codelineno-0-18>18</a></span>
<span class=normal><a href=#__codelineno-0-19>19</a></span>
<span class=normal><a href=#__codelineno-0-20>20</a></span>
<span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=c1># First we check if a directory for CNI exists.</span>
<a id=__codelineno-0-2 name=__codelineno-0-2></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Check if cni exists</span>
<a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=nt>ansible.builtin.stat</span><span class=p>:</span>
<a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/opt/cni/bin/bridge</span>
<a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=nt>register</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">r_cni</span><span class=w> </span><span class=c1># Then we register the output of this task in a variable called &quot;r_cni&quot; (using r_ prefix is an old convention)</span>
<a id=__codelineno-0-6 name=__codelineno-0-6></a>
<a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=c1># Check if newer CNI exists IF the directory in the last task did exist, check &quot;when&quot; key at the bottom of this task</span>
<a id=__codelineno-0-8 name=__codelineno-0-8></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Check if newer cni exists</span><span class=w> </span>
<a id=__codelineno-0-9 name=__codelineno-0-9></a><span class=nt>ansible.builtin.shell</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<a id=__codelineno-0-10 name=__codelineno-0-10></a><span class=w>    </span><span class=no>latest_tag=$(curl -s https://api.github.com/repos/containernetworking/plugins/releases/latest | jq -r &quot;.tag_name&quot;)</span>
<a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=w>    </span><span class=no>current_ver=$(/opt/cni/bin/bridge 2&gt;&amp;1 | cut -d &quot; &quot; -f 4)</span>
<a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=w>    </span><span class=no>case &quot;$current_ver&quot; in ${latest_tag} ) echo &quot;latest&quot;;; *) echo &quot;outdated&quot;;; esac</span>
<a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=nt>register</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">r_cni_ver</span><span class=w> </span><span class=c1># We register the output of our commands which in this case is either &quot;lastest&quot; or &quot;outdated&quot; we will use this for handling the cases in the next task</span>
<a id=__codelineno-0-14 name=__codelineno-0-14></a><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">r_cni.stat.exists</span><span class=w> </span><span class=c1># We only run this task if the output of the last task says that the directory did exist</span>
<a id=__codelineno-0-15 name=__codelineno-0-15></a>
<a id=__codelineno-0-16 name=__codelineno-0-16></a><span class=c1># Get the latest CNI if the output of the last task was not &quot;latest&quot;, check &quot;when&quot; key at the bottom of this task</span>
<a id=__codelineno-0-17 name=__codelineno-0-17></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Get latest cni</span>
<a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=nt>ansible.builtin.shell</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<a id=__codelineno-0-19 name=__codelineno-0-19></a><span class=w>    </span><span class=no>latest_tag=$(curl -s https://api.github.com/repos/containernetworking/plugins/releases/latest | jq -r &quot;.tag_name&quot;)</span>
<a id=__codelineno-0-20 name=__codelineno-0-20></a><span class=w>    </span><span class=no>latest_url=https://github.com/containernetworking/plugins/releases/download/${latest_tag}/cni-plugins-linux-amd64-${latest_tag}.tgz</span>
<a id=__codelineno-0-21 name=__codelineno-0-21></a><span class=w>    </span><span class=no>wget -P /tmp $latest_url</span>
<a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=w>    </span><span class=no>mkdir -p /opt/cni/bin</span>
<a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=w>    </span><span class=no>tar -C /opt/cni/bin -xzf /tmp/&quot;${latest_url##*/}&quot;</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a><span class=w>    </span><span class=no>rm /tmp/&quot;${latest_url##*/}&quot;</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">not r_cni.stat.exists or r_cni_ver.stdout != &quot;latest&quot;</span><span class=w> </span><span class=c1># We run this task if CNI directory does not exist or when the output of the last task was not &quot;latest&quot;</span>
</code></pre></div></td></tr></table></div> <h3 id=readability>Readability<a class=headerlink href=#readability title="Anchor link to this section for reference">ඞ</a></h3> <p>The second most important thing about using Ansible is always being explicit. For example when using modules, it is better to write "ansible.builtin.shell" instead of "shell". That is because external modules and community modules can also be used, but it should be obvious which module is used.</p> <p>Also it should be immediately obvious where variables come from and what is the variable override precedence. This why it is not native behavior in Ansible to combine dicts and lists from different "variables" or "defaults" files. Instead the variables will follow a precedence and overwrite the one before it. Usually this follows the pattern of (weakest to strongest precedence): global variables, group variables, host variables. So a list from global variables will be overwritten if a list with same name exists in host variables for example.</p> <h2 id=jamlab-ansible-architecture>Jamlab Ansible Architecture<a class=headerlink href=#jamlab-ansible-architecture title="Anchor link to this section for reference">ඞ</a></h2> <p>And as per <a href=https://www.ansible.com/blog/ansible-best-practices-essentials>Ansible's own best practices</a>: complexity kills productivity. And I think that a typical ansible monorepo is a bit too complex and usually it is not immediately obvious what goes where.</p> <p>A typical ansible management repository loops something like the examples from the <a href=https://docs.ansible.com/ansible/2.3/playbooks_best_practices.html>old best practices doc of Ansible</a>:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Bash</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1> 1</a></span>
<span class=normal><a href=#__codelineno-1-2> 2</a></span>
<span class=normal><a href=#__codelineno-1-3> 3</a></span>
<span class=normal><a href=#__codelineno-1-4> 4</a></span>
<span class=normal><a href=#__codelineno-1-5> 5</a></span>
<span class=normal><a href=#__codelineno-1-6> 6</a></span>
<span class=normal><a href=#__codelineno-1-7> 7</a></span>
<span class=normal><a href=#__codelineno-1-8> 8</a></span>
<span class=normal><a href=#__codelineno-1-9> 9</a></span>
<span class=normal><a href=#__codelineno-1-10>10</a></span>
<span class=normal><a href=#__codelineno-1-11>11</a></span>
<span class=normal><a href=#__codelineno-1-12>12</a></span>
<span class=normal><a href=#__codelineno-1-13>13</a></span>
<span class=normal><a href=#__codelineno-1-14>14</a></span>
<span class=normal><a href=#__codelineno-1-15>15</a></span>
<span class=normal><a href=#__codelineno-1-16>16</a></span>
<span class=normal><a href=#__codelineno-1-17>17</a></span>
<span class=normal><a href=#__codelineno-1-18>18</a></span>
<span class=normal><a href=#__codelineno-1-19>19</a></span>
<span class=normal><a href=#__codelineno-1-20>20</a></span>
<span class=normal><a href=#__codelineno-1-21>21</a></span>
<span class=normal><a href=#__codelineno-1-22>22</a></span>
<span class=normal><a href=#__codelineno-1-23>23</a></span>
<span class=normal><a href=#__codelineno-1-24>24</a></span>
<span class=normal><a href=#__codelineno-1-25>25</a></span>
<span class=normal><a href=#__codelineno-1-26>26</a></span>
<span class=normal><a href=#__codelineno-1-27>27</a></span>
<span class=normal><a href=#__codelineno-1-28>28</a></span>
<span class=normal><a href=#__codelineno-1-29>29</a></span>
<span class=normal><a href=#__codelineno-1-30>30</a></span>
<span class=normal><a href=#__codelineno-1-31>31</a></span>
<span class=normal><a href=#__codelineno-1-32>32</a></span>
<span class=normal><a href=#__codelineno-1-33>33</a></span>
<span class=normal><a href=#__codelineno-1-34>34</a></span>
<span class=normal><a href=#__codelineno-1-35>35</a></span>
<span class=normal><a href=#__codelineno-1-36>36</a></span>
<span class=normal><a href=#__codelineno-1-37>37</a></span>
<span class=normal><a href=#__codelineno-1-38>38</a></span>
<span class=normal><a href=#__codelineno-1-39>39</a></span>
<span class=normal><a href=#__codelineno-1-40>40</a></span>
<span class=normal><a href=#__codelineno-1-41>41</a></span>
<span class=normal><a href=#__codelineno-1-42>42</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1></a>production<span class=w>                </span><span class=c1># inventory file for production servers</span>
<a id=__codelineno-1-2 name=__codelineno-1-2></a>staging<span class=w>                   </span><span class=c1># inventory file for staging environment</span>
<a id=__codelineno-1-3 name=__codelineno-1-3></a>
<a id=__codelineno-1-4 name=__codelineno-1-4></a>group_vars/
<a id=__codelineno-1-5 name=__codelineno-1-5></a><span class=w>   </span>group1<span class=w>                 </span><span class=c1># here we assign variables to particular groups</span>
<a id=__codelineno-1-6 name=__codelineno-1-6></a><span class=w>   </span>group2<span class=w>                 </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-1-7 name=__codelineno-1-7></a>host_vars/
<a id=__codelineno-1-8 name=__codelineno-1-8></a><span class=w>   </span>hostname1<span class=w>              </span><span class=c1># if systems need specific variables, put them here</span>
<a id=__codelineno-1-9 name=__codelineno-1-9></a><span class=w>   </span>hostname2<span class=w>              </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-1-10 name=__codelineno-1-10></a>
<a id=__codelineno-1-11 name=__codelineno-1-11></a>library/<span class=w>                  </span><span class=c1># if any custom modules, put them here (optional)</span>
<a id=__codelineno-1-12 name=__codelineno-1-12></a>module_utils/<span class=w>             </span><span class=c1># if any custom module_utils to support modules, put them here (optional)</span>
<a id=__codelineno-1-13 name=__codelineno-1-13></a>filter_plugins/<span class=w>           </span><span class=c1># if any custom filter plugins, put them here (optional)</span>
<a id=__codelineno-1-14 name=__codelineno-1-14></a>
<a id=__codelineno-1-15 name=__codelineno-1-15></a>site.yml<span class=w>                  </span><span class=c1># master playbook</span>
<a id=__codelineno-1-16 name=__codelineno-1-16></a>webservers.yml<span class=w>            </span><span class=c1># playbook for webserver tier</span>
<a id=__codelineno-1-17 name=__codelineno-1-17></a>dbservers.yml<span class=w>             </span><span class=c1># playbook for dbserver tier</span>
<a id=__codelineno-1-18 name=__codelineno-1-18></a>
<a id=__codelineno-1-19 name=__codelineno-1-19></a>roles/
<a id=__codelineno-1-20 name=__codelineno-1-20></a><span class=w>    </span>common/<span class=w>               </span><span class=c1># this hierarchy represents a &quot;role&quot;</span>
<a id=__codelineno-1-21 name=__codelineno-1-21></a><span class=w>        </span>tasks/<span class=w>            </span><span class=c1>#</span>
<a id=__codelineno-1-22 name=__codelineno-1-22></a><span class=w>            </span>main.yml<span class=w>      </span><span class=c1>#  &lt;-- tasks file can include smaller files if warranted</span>
<a id=__codelineno-1-23 name=__codelineno-1-23></a><span class=w>        </span>handlers/<span class=w>         </span><span class=c1>#</span>
<a id=__codelineno-1-24 name=__codelineno-1-24></a><span class=w>            </span>main.yml<span class=w>      </span><span class=c1>#  &lt;-- handlers file</span>
<a id=__codelineno-1-25 name=__codelineno-1-25></a><span class=w>        </span>templates/<span class=w>        </span><span class=c1>#  &lt;-- files for use with the template resource</span>
<a id=__codelineno-1-26 name=__codelineno-1-26></a><span class=w>            </span>ntp.conf.j2<span class=w>   </span><span class=c1>#  &lt;------- templates end in .j2</span>
<a id=__codelineno-1-27 name=__codelineno-1-27></a><span class=w>        </span>files/<span class=w>            </span><span class=c1>#</span>
<a id=__codelineno-1-28 name=__codelineno-1-28></a><span class=w>            </span>bar.txt<span class=w>       </span><span class=c1>#  &lt;-- files for use with the copy resource</span>
<a id=__codelineno-1-29 name=__codelineno-1-29></a><span class=w>            </span>foo.sh<span class=w>        </span><span class=c1>#  &lt;-- script files for use with the script resource</span>
<a id=__codelineno-1-30 name=__codelineno-1-30></a><span class=w>        </span>vars/<span class=w>             </span><span class=c1>#</span>
<a id=__codelineno-1-31 name=__codelineno-1-31></a><span class=w>            </span>main.yml<span class=w>      </span><span class=c1>#  &lt;-- variables associated with this role</span>
<a id=__codelineno-1-32 name=__codelineno-1-32></a><span class=w>        </span>defaults/<span class=w>         </span><span class=c1>#</span>
<a id=__codelineno-1-33 name=__codelineno-1-33></a><span class=w>            </span>main.yml<span class=w>      </span><span class=c1>#  &lt;-- default lower priority variables for this role</span>
<a id=__codelineno-1-34 name=__codelineno-1-34></a><span class=w>        </span>meta/<span class=w>             </span><span class=c1>#</span>
<a id=__codelineno-1-35 name=__codelineno-1-35></a><span class=w>            </span>main.yml<span class=w>      </span><span class=c1>#  &lt;-- role dependencies</span>
<a id=__codelineno-1-36 name=__codelineno-1-36></a><span class=w>        </span>library/<span class=w>          </span><span class=c1># roles can also include custom modules</span>
<a id=__codelineno-1-37 name=__codelineno-1-37></a><span class=w>        </span>module_utils/<span class=w>     </span><span class=c1># roles can also include custom module_utils</span>
<a id=__codelineno-1-38 name=__codelineno-1-38></a><span class=w>        </span>lookup_plugins/<span class=w>   </span><span class=c1># or other types of plugins, like lookup in this case</span>
<a id=__codelineno-1-39 name=__codelineno-1-39></a>
<a id=__codelineno-1-40 name=__codelineno-1-40></a><span class=w>    </span>webtier/<span class=w>              </span><span class=c1># same kind of structure as &quot;common&quot; was above, done for the webtier role</span>
<a id=__codelineno-1-41 name=__codelineno-1-41></a><span class=w>    </span>monitoring/<span class=w>           </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-1-42 name=__codelineno-1-42></a><span class=w>    </span>fooapp/<span class=w>               </span><span class=c1># &quot;&quot;</span>
</code></pre></div></td></tr></table></div> <p>In this structure, each root playbook including the master playbook (<code>site.yml</code> in this case) is defined in the project root directory and imports roles from <code>roles/</code>, variables from <code>group_vars/</code> and <code>host_vars/</code>. Then the master playbook runs all the other playbooks that define which roles are run on which hosts or host groups. This introduces a problem where a breaking change in one role will halt the whole run. Also, even with well organized root playbooks, it is never immediately obvious which roles are defined for which root playbooks especially if using hosts in multiple groups or child/parent groups. Furthermore, the root playbooks, <code>group_vars/</code> and <code>host_vars/</code> are in separate directories which is not a huge deal, but this does require one to verify that root playbooks, variables and roles match when planning changes. This requires extra time of getting familiar with what-goes-where especially when doing changes after a long time. For larger projects usually the roles are managed in and imported from separate repositories. It is a great approach, especially for running tests on the roles. However this increases the time of understanding what-goes-where.</p> <p>These are small nitpicks and for most use cases following the standard structure works well, but for maximum simplicity I grew very fond of a system for pull mode Ansible we used at CERN. An example structure for this system looks something like this:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Bash</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1> 1</a></span>
<span class=normal><a href=#__codelineno-2-2> 2</a></span>
<span class=normal><a href=#__codelineno-2-3> 3</a></span>
<span class=normal><a href=#__codelineno-2-4> 4</a></span>
<span class=normal><a href=#__codelineno-2-5> 5</a></span>
<span class=normal><a href=#__codelineno-2-6> 6</a></span>
<span class=normal><a href=#__codelineno-2-7> 7</a></span>
<span class=normal><a href=#__codelineno-2-8> 8</a></span>
<span class=normal><a href=#__codelineno-2-9> 9</a></span>
<span class=normal><a href=#__codelineno-2-10>10</a></span>
<span class=normal><a href=#__codelineno-2-11>11</a></span>
<span class=normal><a href=#__codelineno-2-12>12</a></span>
<span class=normal><a href=#__codelineno-2-13>13</a></span>
<span class=normal><a href=#__codelineno-2-14>14</a></span>
<span class=normal><a href=#__codelineno-2-15>15</a></span>
<span class=normal><a href=#__codelineno-2-16>16</a></span>
<span class=normal><a href=#__codelineno-2-17>17</a></span>
<span class=normal><a href=#__codelineno-2-18>18</a></span>
<span class=normal><a href=#__codelineno-2-19>19</a></span>
<span class=normal><a href=#__codelineno-2-20>20</a></span>
<span class=normal><a href=#__codelineno-2-21>21</a></span>
<span class=normal><a href=#__codelineno-2-22>22</a></span>
<span class=normal><a href=#__codelineno-2-23>23</a></span>
<span class=normal><a href=#__codelineno-2-24>24</a></span>
<span class=normal><a href=#__codelineno-2-25>25</a></span>
<span class=normal><a href=#__codelineno-2-26>26</a></span>
<span class=normal><a href=#__codelineno-2-27>27</a></span>
<span class=normal><a href=#__codelineno-2-28>28</a></span>
<span class=normal><a href=#__codelineno-2-29>29</a></span>
<span class=normal><a href=#__codelineno-2-30>30</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a>ansible.cfg<span class=w>                 </span><span class=c1># ansible configuration file</span>
<a id=__codelineno-2-2 name=__codelineno-2-2></a>hosts<span class=w>                       </span><span class=c1># inventory file</span>
<a id=__codelineno-2-3 name=__codelineno-2-3></a>
<a id=__codelineno-2-4 name=__codelineno-2-4></a>bin/<span class=w>                        </span><span class=c1># binaries</span>
<a id=__codelineno-2-5 name=__codelineno-2-5></a><span class=w>    </span>bootstrap.sh<span class=w>            </span><span class=c1># script for setting up host for the first time</span>
<a id=__codelineno-2-6 name=__codelineno-2-6></a><span class=w>    </span>run-playbooks.sh<span class=w>        </span><span class=c1># script for running relevant playbooks locally on host</span>
<a id=__codelineno-2-7 name=__codelineno-2-7></a>
<a id=__codelineno-2-8 name=__codelineno-2-8></a>playbooks/<span class=w>                  </span><span class=c1># &quot;root&quot; playbook directory</span>
<a id=__codelineno-2-9 name=__codelineno-2-9></a><span class=w>    </span>group_base/<span class=w>             </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-2-10 name=__codelineno-2-10></a><span class=w>        </span>main.yml<span class=w>            </span><span class=c1># here we define roles for a particular group</span>
<a id=__codelineno-2-11 name=__codelineno-2-11></a><span class=w>        </span>group_vars/<span class=w>         </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-2-12 name=__codelineno-2-12></a><span class=w>            </span>all.yml<span class=w>         </span><span class=c1># here we assign variables to a particular group</span>
<a id=__codelineno-2-13 name=__codelineno-2-13></a><span class=w>        </span>host_vars/<span class=w>          </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-2-14 name=__codelineno-2-14></a><span class=w>            </span>&lt;hostname&gt;.yml<span class=w>  </span><span class=c1># here we assign variables to a particular host</span>
<a id=__codelineno-2-15 name=__codelineno-2-15></a><span class=w>    </span>host_&lt;hostname&gt;/<span class=w>        </span><span class=c1># here we define roles for a particular host</span>
<a id=__codelineno-2-16 name=__codelineno-2-16></a><span class=w>        </span>main.yml<span class=w>            </span><span class=c1># define roles for a particular host</span>
<a id=__codelineno-2-17 name=__codelineno-2-17></a><span class=w>        </span>host_vars/<span class=w>          </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-2-18 name=__codelineno-2-18></a><span class=w>            </span>&lt;hostname&gt;.yml<span class=w>  </span><span class=c1># here we assign variables to a particular host</span>
<a id=__codelineno-2-19 name=__codelineno-2-19></a><span class=w>    </span>function_test/<span class=w>          </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-2-20 name=__codelineno-2-20></a><span class=w>        </span>main.yml<span class=w>            </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-2-21 name=__codelineno-2-21></a>
<a id=__codelineno-2-22 name=__codelineno-2-22></a>roles/<span class=w>                      </span><span class=c1># roles directory</span>
<a id=__codelineno-2-23 name=__codelineno-2-23></a><span class=w>    </span>&lt;role&gt;/<span class=w>                 </span><span class=c1># role name </span>
<a id=__codelineno-2-24 name=__codelineno-2-24></a><span class=w>        </span>defaults/<span class=w>           </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-2-25 name=__codelineno-2-25></a><span class=w>            </span>main.yml<span class=w>        </span><span class=c1># &lt;-- default lower priority variables for this role</span>
<a id=__codelineno-2-26 name=__codelineno-2-26></a><span class=w>        </span>files/<span class=w>              </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-2-27 name=__codelineno-2-27></a><span class=w>            </span>file.txt<span class=w>        </span><span class=c1># &lt;-- files</span>
<a id=__codelineno-2-28 name=__codelineno-2-28></a><span class=w>            </span>template.txt.j2<span class=w> </span><span class=c1># &lt;-- files for use with the template resource</span>
<a id=__codelineno-2-29 name=__codelineno-2-29></a><span class=w>        </span>tasks/<span class=w>              </span><span class=c1># &quot;&quot;</span>
<a id=__codelineno-2-30 name=__codelineno-2-30></a><span class=w>            </span>main.yml<span class=w>        </span><span class=c1># &lt;-- tasks to run for the role</span>
</code></pre></div></td></tr></table></div> <p>With this system root playbooks are separated into directories with their own variables and are not run from a single master playbook thus each play can run regardless of whether there are errors in other playbooks. Each playbook only defines which roles to run on the host group and nothing else, for example:</p> <div class=highlight><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>YAML</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1> 1</a></span>
<span class=normal><a href=#__codelineno-3-2> 2</a></span>
<span class=normal><a href=#__codelineno-3-3> 3</a></span>
<span class=normal><a href=#__codelineno-3-4> 4</a></span>
<span class=normal><a href=#__codelineno-3-5> 5</a></span>
<span class=normal><a href=#__codelineno-3-6> 6</a></span>
<span class=normal><a href=#__codelineno-3-7> 7</a></span>
<span class=normal><a href=#__codelineno-3-8> 8</a></span>
<span class=normal><a href=#__codelineno-3-9> 9</a></span>
<span class=normal><a href=#__codelineno-3-10>10</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PLAYBOOK FOR GROUP &#39;GGG&#39;</span>
<a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ggg</span>
<a id=__codelineno-3-3 name=__codelineno-3-3></a>
<a id=__codelineno-3-4 name=__codelineno-3-4></a><span class=w>  </span><span class=nt>roles</span><span class=p>:</span>
<a id=__codelineno-3-5 name=__codelineno-3-5></a>
<a id=__codelineno-3-6 name=__codelineno-3-6></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> role</span><span class=p>:</span><span class=w> </span><span class=nv>pre</span><span class="p p-Indicator">,</span><span class=nt> tags</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=w> </span><span class=nv>pre</span><span class=w> </span><span class="p p-Indicator">],</span><span class=nt> when</span><span class=p>:</span><span class=w> </span><span class=nv>not (disabled_roles.pre | default(false))</span><span class=w> </span><span class="p p-Indicator">}</span>
<a id=__codelineno-3-7 name=__codelineno-3-7></a>
<a id=__codelineno-3-8 name=__codelineno-3-8></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> role</span><span class=p>:</span><span class=w> </span><span class=nv>rrr</span><span class="p p-Indicator">,</span><span class=nt> tags</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=w> </span><span class=nv>rrr</span><span class=w> </span><span class="p p-Indicator">],</span><span class=nt> when</span><span class=p>:</span><span class=w> </span><span class=nv>not (disabled_roles.rrr | default(false))</span><span class=w> </span><span class="p p-Indicator">}</span>
<a id=__codelineno-3-9 name=__codelineno-3-9></a>
<a id=__codelineno-3-10 name=__codelineno-3-10></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> role</span><span class=p>:</span><span class=w> </span><span class=nv>post</span><span class="p p-Indicator">,</span><span class=nt> tags</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=w> </span><span class=nv>post</span><span class=w> </span><span class="p p-Indicator">],</span><span class=nt> when</span><span class=p>:</span><span class=w> </span><span class=nv>not (disabled_roles.post | default(false))</span><span class=w> </span><span class="p p-Indicator">}</span>
</code></pre></div></td></tr></table></div> <p>This and it's accompanying variables file make it simple to understand at a glance which roles are run and where the group variables are defined since they are all together in one directory.</p> <p>For maximum simplicity for managing the playbooks and roles it should be enforced that each host is only part of ONE group. This will ensure that it will always be immediately obvious which playbooks are run for what host when looking at the inventory file.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://jamfox.dev/ target=_blank rel=noopener title=jamfox.dev class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40h-16c-1.1 0-2.2 0-3.3-.1-1.4.1-2.8.1-4.2.1H392c-22.1 0-40-17.9-40-40v-88c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v88c0 22.1-17.9 40-40 40h-55.9c-1.5 0-3-.1-4.5-.2-1.2.1-2.4.2-3.6.2h-16c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9.1-2.8v-69.6H32c-18 0-32-14-32-32.1 0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7l255.4 224.5c8 7 12 15 11 24z"/></svg> </a> <a href=https://github.com/JamFox target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.linkedin.com/in/katurv/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://www.instagram.com/karlturvas/ target=_blank rel=noopener title=www.instagram.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> <a href=https://brain.jamfox.dev/ target=_blank rel=noopener title=brain.jamfox.dev class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M184 0c30.9 0 56 25.1 56 56v400c0 30.9-25.1 56-56 56-28.9 0-52.7-21.9-55.7-50.1-5.2 1.4-10.7 2.1-16.3 2.1-35.3 0-64-28.7-64-64 0-7.4 1.3-14.6 3.6-21.2C21.4 367.4 0 338.2 0 304c0-31.9 18.7-59.5 45.8-72.3C37.1 220.8 32 207 32 192c0-30.7 21.6-56.3 50.4-62.6C80.8 123.9 80 118 80 112c0-29.9 20.6-55.1 48.3-62.1 3-28 26.8-49.9 55.7-49.9zm144 0c28.9 0 52.6 21.9 55.7 49.9C411.5 56.9 432 82 432 112c0 6-.8 11.9-2.4 17.4 28.8 6.2 50.4 31.9 50.4 62.6 0 15-5.1 28.8-13.8 39.7 27.1 12.8 45.8 40.4 45.8 72.3 0 34.2-21.4 63.4-51.6 74.8 2.3 6.6 3.6 13.8 3.6 21.2 0 35.3-28.7 64-64 64-5.6 0-11.1-.7-16.3-2.1-3 28.2-26.8 50.1-55.7 50.1-30.9 0-56-25.1-56-56V56c0-30.9 25.1-56 56-56z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["header.autohide", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.tabs.sticky", "content.tabs.link", "search.share", "content.code.annotate", "content.code.copy", "content.action.view", "navigation.indexes", "navigation.prune"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.c8d2eff1.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../../../javascripts/tablesort.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>